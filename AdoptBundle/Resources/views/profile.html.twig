{% extends ":Layout:Layout.html.twig" %}

{% block content %}


    <section class="cp-inner-banner">
        <div class="container">
            <div class="cp-inner-banner-outer">
                <h2>MY PROFILE</h2>
                <!--Breadcrumb Start-->
                <ul class="breadcrumb">
                    <li><a href="index.html">Home</a></li>
                    <li>Pages</li>
                    <li class="active">Our vets detail</li>
                </ul><!--Breadcrumb End-->
            </div>
        </div>
    </section><!--Inner Banner Content End-->

    <!--Main Content Start-->
    <div class="cp-main-content">

        <!--Captcha section-->
        <section class="cp-team-detail">
            <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

            <style media="screen">
                @import "https://fonts.googleapis.com/css?family=Lato";


                .wrap {
                    height: 100px;
                    width: 100%;
                    align-items: center;
                }

                i.fa.fa-snapchat {
                    position: absolute;
                    text-align: center;
                    color: black;
                    height: 100px;
                    width: 100px;
                    font-size: 100px;
                    margin: 0 auto;
                    left: 0;
                    right: 0;
                    border-radius: 50%;
                    cursor: pointer;
                }

                .modal-full {
                    height: 400px;
                    width: 100%;
                    display: none;

                    background-color: rgba(0, 0, 0, 0.4);
                    align-items: center;
                    flex-direction: column;
                    justify-content: space-around;
                }
                .modal-full.active {
                    opacity: 0;
                    display: flex;
                    animation: fadeIn 1s forwards;
                }
                @keyframes fadeIn {
                    from {
                        opacity: 0;
                    }
                    to {
                        opacity: 1;
                    }
                }
                .modal-full.transition-out {
                    transition: 1s all ease;
                    background-color: rgba(0, 0, 0, 0);
                }
                .modal-full.transition-out .info {
                    animation: scaleOut 1s forwards;
                }
                @keyframes scaleOut {
                    0% {
                        transform: scale(1);
                    }
                    10% {
                        transform: scale(1.04);
                    }
                    40% {
                        transform: scale(0);
                    }
                    100% {
                        transform: scale(0);
                    }
                }
                .modal-full .info {
                    height: 300px;
                    width: 300px;
                    background: black;
                    border-radius: 20px;
                    display: flex;
                    position: relative;
                    align-items: center;
                    flex-direction: column;
                    justify-content: center;
                    color: white;
                    font-family: 'Lato';
                    font-size: 20px;
                    padding: 20px 0;
                }
                .modal-full .info i {
                    position: absolute;
                    color: white;
                    top: 10px;
                    right: 5px;
                    font-size: 40px;
                    height: 40px;
                    width: 40px;
                    cursor: pointer;
                }
                .modal-full .info img {
                    height: 150px;
                    width: 150px;
                    margin: 10px auto;
                }

            </style>

            <div class='wrap'>
                <i class='fa fa-snapchat'></i>
            </div>
            <div class='modal-full'>
                <div class='info'><span>Scan:</span><img src="data:image/png;base64,
                            {{ barcode({code: 'string to encode', type: 'datamatrix', format: 'png', width: 10, height: 10, color: [127, 127, 127]}) }}
                            " /><i class="fa fa-times-circle-o" aria-hidden="true"></i></div>
            </div>


            <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js'></script>

            <script type="text/javascript">
                $('.fa.fa-snapchat').on('click', () => {
                    $('.modal-full').addClass('active');
                });

                $('.info .fa.fa-times-circle-o').on('click', () => {
                    $('.modal-full').addClass('transition-out').delay(1000).queue(function(next){
                    $(this).removeClass('transition-out').removeClass("active");
                    next();
                });
                });
            </script>

        </section>


        <!--Team Detail Section Start-->
        <section class="cp-team-detail">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-sm-12">
                        <!--Team Thumb Start-->
                        <figure class="cp-team-thumb">
                            <img src="{{ asset('images/'~Pets.petImage) }}" style="width: 570px; height: 755px" alt="">
                        </figure><!--Team Thumb End-->
                    </div>
                    <div class="col-md-6 col-sm-12">
                        <!--About Text Start-->
                        <div class="cp-about-text">
                            <h3>Hello, I am {{ Pets.namePet }}</h3>
                            <div class="cp-top">
                                <span class="desination">{{ Pets.breed }}</span>
                                <ul class="cp-social-links">
                                    <li><a href="#"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
                                    <li><a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a></li>
                                    <li><a href="#"><i class="fa fa-instagram" aria-hidden="true"></i></a></li>
                                </ul>
                            </div>
                            <p class="first">{{ Pets.age }}, {{ Pets.sex }}, {{ Pets.color }}</p>
                            <p>description: {{ Pets.description }}</p>

                            <p>Praesent odio tellus, posuere sed, dictum sed, fermentum at, orci. Aenean arcu tortor, suscipit vitae, hendrerit condimentum, dapibus ac, nulla. Curabitur sit consectetuer ipsum dolor sit amet justo et sit amet justo consectetuer adipiscing elit.</p>

                            <!--Team Detail Section End
                            <img src="data:image/png;base64,
                            {{ barcode({code: 'string to encode', type: 'datamatrix', format: 'png', width: 10, height: 10, color: [127, 127, 127]}) }}
                            " />

                            -->

                            <div class="cp-bottom">

                            </div>
                        </div><!--About Text End-->
                    </div>
                </div>
            </div>
        </section><!--Team Detail Section End-->



        <section class="cp-testimonial-section pd-tb100">
            <div class="container">
                <!--Heading Holder Start-->
                <div class="cp-heading-style1_v2">
                    <h2>Testimonials</h2>
                </div><!--Heading Holder End-->

                <!--Services Slider Start-->
                <div class="owl-carousel" id="cp-testimonial-slider">
                    {% for comment in comments %}
                    <div class="item">
                        <!--Services Box Start-->

                        <article class="cp-testimonial-item">
                            <div class="cp-top-holder">
                                <div class="radius-img">
                                    <img src="images/testimonial-sm-01.jpg" alt="">
                                </div>
                                <blockquote>
                                    <p>"{{ comment.comment }}"</p>
                                </blockquote>
                            </div>
                            <div class="bottom-holder">
                                <h4>User {{ comment.userid }}</h4>
                            </div>
                        </article><!--Services Item End-->


                    </div>
                    {% endfor %}



                </div><!--Services Slider Ends-->
                <!--Testimonial Animate Image Start-->
                <div class="scrollme">
                    <div class="cp-testimonial-pet animateme" data-when="span" data-from="0.4" data-to="0.9" data-opacity="0.5" data-translatex="-400" data-rotatez="10">
                    </div>
                </div><!--Testimonial Animate Image End-->
            </div>
        </section><!--Testimonial Section End-->


        <section class="cp-team-detail">
            <div class="container">

                <br><br><br><br><br>


                <style>
                    /* Always set the map height explicitly to define the size of the div
                     * element that contains the map. */
                    #map {
                        height: 400px;
                    }
                    /* Optional: Makes the sample page fill the window. */
                    html, body {
                        height: 100%;
                        margin: 0;
                        padding: 0;
                    }
                </style>

                <div class="sc_parallax light" data-parallax-speed="0.2" data-parallax-x-pos="50%" data-parallax-y-pos="50%">
                    <div class="sc_parallax parallax_style_1 sc_parallax_with_video dark" data-parallax-speed="-0.3" data-parallax-x-pos="50%" data-parallax-y-pos="0%">
                        <div class="sc_video_bg_wrapper">
                            <div id="map"> </div>
                        </div>
                        <div class="sc_parallax_content">
                            <div class="sc_parallax_overlay">
                                <div class="sc_section" id="parllele">
                                    <br/>
                                    <h2>Calcul de distance...</h2>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <script>
                    // Note: This example requires that you consent to location sharing when
                    // prompted by your browser. If you see the error "The Geolocation service
                    // failed.", it means you probably did not give permission for the browser to
                    // locate you.
                    var map, infoWindow;
                    function initMap() {
                        map = new google.maps.Map(document.getElementById('map'), {
                            center: {lat: -34.397, lng: 150.644},
                            zoom: 14
                        });
                        infoWindow = new google.maps.InfoWindow;

                        // Try HTML5 geolocation.
                        if (navigator.geolocation) { //Checks if browser supports geolocation
                            navigator.geolocation.getCurrentPosition(function (position) {                                                              //This gets the
                                var latitude = position.coords.latitude;                    //users current
                                var longitude = position.coords.longitude;                 //location
                                var coords = new google.maps.LatLng(latitude, longitude); //Creates variable for map coordinates
                                var directionsService = new google.maps.DirectionsService();
                                var directionsDisplay = new google.maps.DirectionsRenderer();
                                var mapOptions = //Sets map options
                                    {
                                        zoom: 15,  //Sets zoom level (0-21)
                                        center: coords, //zoom in on users location
                                        mapTypeControl: true, //allows you to select map type eg. map or satellite
                                        navigationControlOptions:
                                            {
                                                style: google.maps.NavigationControlStyle.SMALL //sets map controls size eg. zoom
                                            },
                                        mapTypeId: google.maps.MapTypeId.ROADMAP //sets type of map Options:ROADMAP, SATELLITE, HYBRID, TERRIAN
                                    };
                                map = new google.maps.Map( /*creates Map variable*/ document.getElementById("map"), mapOptions /*Creates a new map using the passed optional parameters in the mapOptions parameter.*/);
                                directionsDisplay.setMap(map);
                                directionsDisplay.setPanel(document.getElementById('panel'));
                                var request = {
                                    origin: coords,
                                    destination: '{{ Pets.city }}',
                                    travelMode: google.maps.DirectionsTravelMode.DRIVING
                                };
                                directionsService.route(request, function (response, status) {
                                    if (status == google.maps.DirectionsStatus.OK) {
                                        directionsDisplay.setDirections(response);
                                        //alert(response.routes[0].legs[0].distance.value/1000+" KM"); // the distance in metres
                                        var ValDistance = response.routes[0].legs[0].distance.value/1000+" KM";
                                        console.log(response.routes[0].legs[0].distance.value/1000+" KM");
                                        document.getElementById('parllele').innerHTML = "<h2>"+ValDistance+" de votre Position</h2>"
                                        console.log(ValDistance);
                                    }
                                });
                            });
                        }
                    }


                </script>
                <script async defer
                        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCVd1zxw6RyTXsutTpBuvVnOazwBWxs8Ok
&callback=initMap">
                </script>

                <br><br><br><br>

            </div>
        </section>

        <section class="cp-home-contact-section pd-t100">
            <div class="container">
                <!--Heading Holder Start-->
                <div class="cp-heading-style1_v1">
                    <h2>Submit a review</h2>
                </div><!--Heading Holder End-->

                <!--Contact Inner Start-->
                <div class="cp-contact-inner">

                        <div class="row">


                            <div class="col-md-12 col-sm-12">
                                <div class="input-field textarea-field">
                                    <textarea id="contact_form_message" name="Comment" class="validate" required></textarea>
                                    <label>Review</label>
                                </div>
                            </div>

                            <div class="col-md-12 col-sm-12">
                                <div class="input-field btn-holder">
                                    <button type="submit" onclick="Comment()" class="btn-submit cp-btn-style1" name="contact_submit">Submit</button>
                                </div>
                            </div>
                        </div>
                        <script>
                            var commentaire =  document.getElementById('contact_form_message').value;
                            console.log(commentaire);

                            function Comment(){
                                var commentaire =  document.getElementById('contact_form_message').value;
                                var comment =  document.getElementById('contact_form_message').value;
                                var urlEdit = "{{ path('comment', { 'body': "bod" , 'post_id':Pets.idPet  }) }}"
                                urlEdit = urlEdit.replace("bod", commentaire);
                                console.log('value: ' + commentaire);
                                $.ajax({
                                    method: 'POST',
                                    url: urlEdit,
                                    ifModified:true,
                                    success: function(d){
                                        //$('#description').html($('#newDescc').val()); //span où tu veux que ce nombre apparaisse
                                        if(d.msg == "non"){
                                            document.getElementById('error').style.display = "block";
                                            document.getElementById('success').style.display = "none";
                                        }
                                        else {


                                            document.getElementById('error').style.display = "none";
                                            document.getElementById('success').style.display = "block";
                                            document.getElementById('contenuComment').innerText = "Your comment: "+commentaire+" has been submitted";
                                        }
                                    }
                                });

                            };
                        </script>

                    <div class="sc_infobox sc_infobox_style_error sc_infobox_closeable" style="width: 715px; display:none;" id="error">
                        <h4>Please dont use bad words in the review</h4>
                    </div>


                    <div class="sc_infobox sc_infobox_style_success sc_infobox_closeable inited" style="width: 715px; display:none;" id="success">
                        <h4>Success Message</h4>
                        <div id="contenuComment">
                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Modi, sint tempora est architecto unde accusantium dicta dolorum obcaecati commodi accusamus.</p>
                        </div>
                    </div>

                </div><!--Contact Inner End-->
            </div>
            <!--Pet Animate Image Start-->
            <div class="scrollme">
                <div class="cp-pet-animate animateme" data-when="span" data-from="0.2" data-to="0.9" data-opacity="0" data-translatex="100" data-rotatez="10">
                </div>
            </div><!--Pet Animate Image End-->
        </section><!--Contact Us Section End-->

    </div><!--Main Content End-->

    </div><!--Main Content End-->


{% endblock content %}